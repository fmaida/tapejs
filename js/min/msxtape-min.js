msx={parametri:{},conto_bytes:0,ricalcola_onde:function(){var s=msx.parametri;s.campionamenti=s.frequenza/s.bitrate;var e=parseInt(s.campionamenti/4),a=parseInt(255*s.ampiezza),r=255-a;for(s.wave_bit_0=[],i=0;i<2*e;i++)s.wave_bit_0.push(r);for(i=0;i<2*e;i++)s.wave_bit_0.push(a);for(s.wave_bit_1=[],i=0;i<e;i++)s.wave_bit_1.push(r);for(i=0;i<e;i++)s.wave_bit_1.push(a);for(i=0;i<e;i++)s.wave_bit_1.push(r);for(i=0;i<e;i++)s.wave_bit_1.push(a);for(msx.parametri.wave_silenzio=[],i=0;i<4*e;i++)s.wave_silenzio.push(128)},inserisci_bit:function(i){var s=0,e=msx.parametri;for(0==i?onda=e.wave_bit_0:1==i?onda=e.wave_bit_1:onda=e.wave_silenzio,s=0;s<onda.length;s++)msx.data.push(onda[s])},inserisci_byte:function(i){msx.inserisci_bit(0);var s;for(s=0;8>s;s++)0==(1&i)?msx.inserisci_bit(0):msx.inserisci_bit(1),i>>=1;msx.inserisci_bit(1),msx.inserisci_bit(1)},inserisci_array:function(i){var s=0;for(s=0;s<i.length;s++)msx.inserisci_byte(i[s])},inserisci_stringa:function(i,s){s="undefined"!=typeof s?s:!0;var e=0;for(e=0;e<i.length;e++)msx.inserisci_byte(i.charCodeAt(e)),msx.conto_bytes+=1,msx.conto_bytes>255&&(msx.inserisci_silenzio(1e3),msx.inserisci_sincronismo(2e3),msx.conto_bytes=0);s&&(msx.inserisci_byte(13),msx.inserisci_byte(10),msx.conto_bytes+=2),msx.conto_bytes>255&&(msx.inserisci_silenzio(1e3),msx.inserisci_sincronismo(2e3),msx.conto_bytes=0)},inserisci_sincronismo:function(i){for(var s=0,e=msx.parametri;s<e.bitrate*e.campionamenti*i/1e3;)msx.inserisci_bit(1),s+=e.wave_bit_1.length},inserisci_silenzio:function(i){for(var s=0,e=msx.parametri;s<e.bitrate*e.campionamenti*i/1e3;)msx.inserisci_bit(-1),s+=e.wave_silenzio.length},inizializza:function(){for(msx.audio=new Audio,msx.wave=new RIFFWAVE,msx.data=[],msx.parametri.blocco_intestazione=[31,166,222,186,204,19,"}".charCodeAt(0),"t".charCodeAt(0)],msx.parametri.blocco_file_ascii=[234,234,234,234,234,234,234,234,234,234],msx.parametri.blocco_file_basic=[211,211,211,211,211,211,211,211,211,211],msx.parametri.blocco_file_binario=[208,208,208,208,208,208,208,208,208,208],msx.parametri.frequenza=19200,msx.parametri.bitrate=1200,msx.parametri.ampiezza=.85,msx.wave.header.sampleRate=msx.parametri.frequenza,msx.wave.header.numChannels=1,msx.ricalcola_onde(),msx.inserisci_sincronismo(2500),msx.inserisci_array(msx.parametri.blocco_file_ascii),msx.inserisci_stringa("TAPEJS",!1),msx.inserisci_silenzio(2e3),msx.inserisci_sincronismo(2500),msx.inserisci_stringa("10 KEY OFF : CLS"),msx.inserisci_stringa('20 PRINT "----------------------------------"'),msx.inserisci_stringa('30 PRINT "CIAO A TUTTI BELLI E BRUTTI"'),msx.inserisci_stringa('40 PRINT "SE RIUSCITE A VEDERE QUESTO MESSAGGIO"'),msx.inserisci_stringa('50 PRINT "SIGNIFICA CHE IL PROGRAMMA FUNZIONA"'),msx.inserisci_stringa('60 PRINT "----------------------------------"'),msx.inserisci_stringa('70 PLAY "v15t255cdgbag"'),msx.inserisci_silenzio(750),msx.inserisci_sincronismo(1500),i=0;i<255;i++)msx.inserisci_array([26]);msx.wave.Make(msx.data),msx.audio.src=msx.wave.dataURI}},msx.inizializza();